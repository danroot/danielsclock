<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Central Time Clock</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            width: 800px;
            height: 480px;
            overflow: hidden;
            position: relative;
            font-family: Arial, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        
        /* Light mode (7pm to 6am): black on white */
        body.light-mode {
            background-color: white;
            color: black;
        }
        body.light-mode .clock-face {
            fill: white;
            stroke: #333;
        }
        body.light-mode .clock-element {
            stroke: #333;
            fill: #333;
        }
        body.light-mode .hour-marker {
            stroke: #ccc;
        }
        
        /* Dark mode (6am to 7pm): white on black */
        body.dark-mode {
            background-color: black;
            color: white;
        }
        body.dark-mode .clock-face {
            fill: black;
            stroke: white;
        }
        body.dark-mode .clock-element {
            stroke: white;
            fill: white;
        }
        body.dark-mode .hour-marker {
            stroke: #666;
        }
        
        .container {
            position: absolute;
            left: 30px;
            top: 65px;
            bottom: 0;
            display: flex;
            align-items: center;
        }
        .container svg {
            width: 440px !important;
            height: 440px !important;
        }
        .date {
            position: absolute;
            top: 20px;
            left: 20px;
            font-size: 20px;
        }
    </style>
</head>
<body>
    <div class="date" id="date"></div>
    <div class="container">
        <svg width="440" height="440">
            <!-- Clock face -->
            <circle cx="220" cy="220" r="205" class="clock-face" stroke-width="5"/>
            
            <!-- Hour markers -->
            <g id="hour-markers">
                <line x1="220" y1="30" x2="220" y2="47" class="hour-marker" stroke-width="3"/>
                <line x1="345.3" y1="66.6" x2="333.6" y2="78.2" class="hour-marker" stroke-width="3"/>
                <line x1="410" y1="220" x2="393" y2="220" class="hour-marker" stroke-width="3"/>
                <line x1="345.3" y1="373.5" x2="333.6" y2="361.8" class="hour-marker" stroke-width="3"/>
                <line x1="220" y1="410" x2="220" y2="393" class="hour-marker" stroke-width="3"/>
                <line x1="94.7" y1="373.5" x2="106.4" y2="361.8" class="hour-marker" stroke-width="3"/>
                <line x1="30" y1="220" x2="47" y2="220" class="hour-marker" stroke-width="3"/>
                <line x1="94.7" y1="66.6" x2="106.4" y2="78.2" class="hour-marker" stroke-width="3"/>
            </g>
            
            <!-- Hour hand -->
            <line id="hour-hand" x1="220" y1="220" x2="220" y2="132" class="clock-element" stroke-width="11" stroke-linecap="round"/>
            
            <!-- Minute hand -->
            <line id="minute-hand" x1="220" y1="220" x2="220" y2="88" class="clock-element" stroke-width="8" stroke-linecap="round"/>
            
            <!-- Hour numbers -->
            <text x="220" y="66" text-anchor="middle" dominant-baseline="middle" font-size="35" font-weight="bold" class="clock-element">12</text>
            <text x="300" y="85" text-anchor="middle" dominant-baseline="middle" font-size="35" font-weight="bold" class="clock-element">1</text>
            <text x="360" y="144" text-anchor="middle" dominant-baseline="middle" font-size="35" font-weight="bold" class="clock-element">2</text>
            <text x="382" y="220" text-anchor="middle" dominant-baseline="middle" font-size="35" font-weight="bold" class="clock-element">3</text>
            <text x="360" y="296" text-anchor="middle" dominant-baseline="middle" font-size="35" font-weight="bold" class="clock-element">4</text>
            <text x="300" y="355" text-anchor="middle" dominant-baseline="middle" font-size="35" font-weight="bold" class="clock-element">5</text>
            <text x="220" y="374" text-anchor="middle" dominant-baseline="middle" font-size="35" font-weight="bold" class="clock-element">6</text>
            <text x="140" y="355" text-anchor="middle" dominant-baseline="middle" font-size="35" font-weight="bold" class="clock-element">7</text>
            <text x="80" y="296" text-anchor="middle" dominant-baseline="middle" font-size="35" font-weight="bold" class="clock-element">8</text>
            <text x="58" y="220" text-anchor="middle" dominant-baseline="middle" font-size="35" font-weight="bold" class="clock-element">9</text>
            <text x="80" y="144" text-anchor="middle" dominant-baseline="middle" font-size="35" font-weight="bold" class="clock-element">10</text>
            <text x="140" y="85" text-anchor="middle" dominant-baseline="middle" font-size="35" font-weight="bold" class="clock-element">11</text>
            
            <!-- Center dot -->
            <circle cx="220" cy="220" r="12" class="clock-element"/>
        </svg>
    </div>

    <script>
        // Check for dark mode query parameter or time of day
        function setTheme() {
            const urlParams = new URLSearchParams(window.location.search);
            const forceDarkMode = urlParams.has('darkmode');
            
            if (forceDarkMode) {
                document.body.className = 'dark-mode';
            } else{
                document.body.className = 'light-mode';
            }
        }
        
        function updateClock() {
            const now = new Date();
            
            // Get time in Central Time using proper formatter
            const formatter = new Intl.DateTimeFormat('en-US', {
                timeZone: 'America/Chicago',
                hour: 'numeric',
                minute: 'numeric',
                hour12: false
            });
            
            const parts = formatter.formatToParts(now);
            const hourValue = parts.find(p => p.type === 'hour').value;
            const minuteValue = parts.find(p => p.type === 'minute').value;
            
            const hours = parseInt(hourValue) % 12;
            const minutes = parseInt(minuteValue);
            
            // Calculate angles (no offset needed - hands start at 12 o'clock)
            const minuteAngle = minutes * 6; // 6 degrees per minute
            const hourAngle = hours * 30 + minutes * 0.5; // 30 degrees per hour
            
            // Update hands
            document.getElementById('minute-hand').setAttribute('transform', `rotate(${minuteAngle} 220 220)`);
            document.getElementById('hour-hand').setAttribute('transform', `rotate(${hourAngle} 220 220)`);
            
            // Update date
            const dateFormatter = new Intl.DateTimeFormat('en-US', {
                timeZone: 'America/Chicago',
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            document.getElementById('date').textContent = dateFormatter.format(now);
        }
        
        // Set initial theme
        setTheme();
        // Update theme every minute in case the time crosses a threshold
        setInterval(setTheme, 60000);
        
        updateClock();
        setInterval(updateClock, 1000);
    </script>
</body>
</html>
