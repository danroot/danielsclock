<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Central Time Clock</title>
    <style>
        body {
            margin: 0;
            padding: 0;
            width: 800px;
            height: 480px;
            overflow: hidden;
            display: flex;
            justify-content: center;
            align-items: center;
            font-family: Arial, sans-serif;
            transition: background-color 0.3s, color 0.3s;
        }
        
        /* Light mode (7pm to 6am): black on white */
        body.light-mode {
            background-color: white;
            color: black;
        }
        body.light-mode .clock-face {
            fill: white;
            stroke: #333;
        }
        body.light-mode .clock-element {
            stroke: #333;
            fill: #333;
        }
        body.light-mode .hour-marker {
            stroke: #ccc;
        }
        
        /* Dark mode (6am to 7pm): white on black */
        body.dark-mode {
            background-color: black;
            color: white;
        }
        body.dark-mode .clock-face {
            fill: black;
            stroke: white;
        }
        body.dark-mode .clock-element {
            stroke: white;
            fill: white;
        }
        body.dark-mode .hour-marker {
            stroke: #666;
        }
        
        .container {
            text-align: center;
        }
        .date {
            font-size: 20px;
            margin-top: 20px;
        }
    </style>
</head>
<body>
    <div class="container">
        <svg width="300" height="300" viewBox="0 0 300 300">
            <!-- Clock face -->
            <circle cx="150" cy="150" r="140" class="clock-face" stroke-width="4"/>
            
            <!-- Hour markers -->
            <g id="hour-markers">
                <line x1="150" y1="20" x2="150" y2="32" class="hour-marker" stroke-width="2"/>
                <line x1="235.4" y1="45.4" x2="227.5" y2="53.3" class="hour-marker" stroke-width="2"/>
                <line x1="280" y1="150" x2="268" y2="150" class="hour-marker" stroke-width="2"/>
                <line x1="235.4" y1="254.6" x2="227.5" y2="246.7" class="hour-marker" stroke-width="2"/>
                <line x1="150" y1="280" x2="150" y2="268" class="hour-marker" stroke-width="2"/>
                <line x1="64.6" y1="254.6" x2="72.5" y2="246.7" class="hour-marker" stroke-width="2"/>
                <line x1="20" y1="150" x2="32" y2="150" class="hour-marker" stroke-width="2"/>
                <line x1="64.6" y1="45.4" x2="72.5" y2="53.3" class="hour-marker" stroke-width="2"/>
            </g>
            
            <!-- Hour hand -->
            <line id="hour-hand" x1="150" y1="150" x2="150" y2="90" class="clock-element" stroke-width="8" stroke-linecap="round"/>
            
            <!-- Minute hand -->
            <line id="minute-hand" x1="150" y1="150" x2="150" y2="60" class="clock-element" stroke-width="6" stroke-linecap="round"/>
            
            <!-- Hour numbers -->
            <text x="150" y="45" text-anchor="middle" dominant-baseline="middle" font-size="24" font-weight="bold" class="clock-element">12</text>
            <text x="205" y="58" text-anchor="middle" dominant-baseline="middle" font-size="24" font-weight="bold" class="clock-element">1</text>
            <text x="245" y="98" text-anchor="middle" dominant-baseline="middle" font-size="24" font-weight="bold" class="clock-element">2</text>
            <text x="260" y="150" text-anchor="middle" dominant-baseline="middle" font-size="24" font-weight="bold" class="clock-element">3</text>
            <text x="245" y="202" text-anchor="middle" dominant-baseline="middle" font-size="24" font-weight="bold" class="clock-element">4</text>
            <text x="205" y="242" text-anchor="middle" dominant-baseline="middle" font-size="24" font-weight="bold" class="clock-element">5</text>
            <text x="150" y="255" text-anchor="middle" dominant-baseline="middle" font-size="24" font-weight="bold" class="clock-element">6</text>
            <text x="95" y="242" text-anchor="middle" dominant-baseline="middle" font-size="24" font-weight="bold" class="clock-element">7</text>
            <text x="55" y="202" text-anchor="middle" dominant-baseline="middle" font-size="24" font-weight="bold" class="clock-element">8</text>
            <text x="40" y="150" text-anchor="middle" dominant-baseline="middle" font-size="24" font-weight="bold" class="clock-element">9</text>
            <text x="55" y="98" text-anchor="middle" dominant-baseline="middle" font-size="24" font-weight="bold" class="clock-element">10</text>
            <text x="95" y="58" text-anchor="middle" dominant-baseline="middle" font-size="24" font-weight="bold" class="clock-element">11</text>
            
            <!-- Center dot -->
            <circle cx="150" cy="150" r="8" class="clock-element"/>
        </svg>
        
        <div class="date" id="date"></div>
    </div>

    <script>
        // Check for dark mode query parameter or time of day
        function setTheme() {
            const urlParams = new URLSearchParams(window.location.search);
            const forceDarkMode = urlParams.has('darkmode');
            
            if (forceDarkMode) {
                document.body.className = 'dark-mode';
            } else {
                // Get current hour in Central Time
                const now = new Date();
                const formatter = new Intl.DateTimeFormat('en-US', {
                    timeZone: 'America/Chicago',
                    hour: 'numeric',
                    hour12: false
                });
                const parts = formatter.formatToParts(now);
                const hour = parseInt(parts.find(p => p.type === 'hour').value);
                
                // 7pm (19:00) to 6am (6:00): light mode (black on white)
                // 6am (6:00) to 7pm (19:00): dark mode (white on black)
                if (hour >= 19 || hour < 6) {
                    document.body.className = 'dark-mode';
                } else {
                    document.body.className = 'light-mode';
                }
            }
        }
        
        function updateClock() {
            const now = new Date();
            
            // Get time in Central Time using proper formatter
            const formatter = new Intl.DateTimeFormat('en-US', {
                timeZone: 'America/Chicago',
                hour: 'numeric',
                minute: 'numeric',
                hour12: false
            });
            
            const parts = formatter.formatToParts(now);
            const hourValue = parts.find(p => p.type === 'hour').value;
            const minuteValue = parts.find(p => p.type === 'minute').value;
            
            const hours = parseInt(hourValue) % 12;
            const minutes = parseInt(minuteValue);
            
            // Calculate angles (no offset needed - hands start at 12 o'clock)
            const minuteAngle = minutes * 6; // 6 degrees per minute
            const hourAngle = hours * 30 + minutes * 0.5; // 30 degrees per hour
            
            // Update hands
            document.getElementById('minute-hand').setAttribute('transform', `rotate(${minuteAngle} 150 150)`);
            document.getElementById('hour-hand').setAttribute('transform', `rotate(${hourAngle} 150 150)`);
            
            // Update date
            const dateFormatter = new Intl.DateTimeFormat('en-US', {
                timeZone: 'America/Chicago',
                weekday: 'long',
                year: 'numeric',
                month: 'long',
                day: 'numeric'
            });
            document.getElementById('date').textContent = dateFormatter.format(now);
        }
        
        // Set initial theme
        setTheme();
        // Update theme every minute in case the time crosses a threshold
        setInterval(setTheme, 60000);
        
        updateClock();
        setInterval(updateClock, 1000);
    </script>
</body>
</html>
